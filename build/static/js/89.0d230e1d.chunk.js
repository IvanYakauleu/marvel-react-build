"use strict";(self.webpackChunkmarvel_app=self.webpackChunkmarvel_app||[]).push([[89],{2373:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t.p+"static/media/error.42292aa12b6bc303ce99.gif",a=t(184),c=function(){return(0,a.jsx)("img",{style:{display:"block",width:"250px",height:"250px",objectFit:"contain",margin:"0 auto"},src:r,alt:"error"})}},6303:function(e,n,t){t.r(n),t.d(n,{default:function(){return T}});var r=t(9439),a=t(2791),c=t(8813),s=t(108),i=t(2373),o=t.p+"static/media/mjolnir.e689af51009e6db694f0.png",l=t.p+"static/media/shield.527ba216a54cf20fa912.png",u=t(184),d=function(e){var n=e.char,t=n.name,r=n.thumbnail,a=n.description,c=n.homepage,s=n.wiki,i="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===r?(0,u.jsx)("img",{src:r,alt:t,className:"randomchar__block-img",style:{objectFit:"contain"}}):(0,u.jsx)("img",{src:r,alt:t,className:"randomchar__block-img"});return(0,u.jsxs)("div",{className:"randomchar__block",children:[i,(0,u.jsxs)("div",{className:"randomchar__block-info",children:[(0,u.jsx)("div",{className:"randomchar__name",children:t}),(0,u.jsx)("div",{className:"randomchar__descr",children:a?a.slice(0,210)+"...":"There is no description for this character"}),(0,u.jsxs)("div",{className:"randomchar__btns",children:[(0,u.jsx)("div",{className:"randomchar__btn",children:(0,u.jsx)("a",{href:c,className:"button button_red button_main",children:"HOMEPAGE"})}),(0,u.jsx)("div",{className:"randomchar__btn",children:(0,u.jsx)("a",{href:s,className:"button button_grey button_main",children:"WIKI"})})]})]})]})},m=function(){var e=(0,a.useState)({}),n=(0,r.Z)(e,2),t=n[0],m=n[1],h=(0,c.Z)(),f=h.loading,p=h.error,v=h.getCharacter,_=h.clearError;(0,a.useEffect)((function(){j();var e=setInterval(j,6e4);return function(){clearInterval(e)}}),[]);var x=function(e){m(e)},j=function(){_();var e=Math.floor(400*Math.random())+1011e3;v(e).then(x)},b=p?(0,u.jsx)(i.Z,{}):null,g=f?(0,u.jsx)(s.Z,{}):null,N=f||p?null:(0,u.jsx)(d,{char:t});return(0,u.jsxs)("div",{className:"randomchar",children:[b,g,N,(0,u.jsxs)("div",{className:"randomchar__static",children:[(0,u.jsxs)("div",{className:"randomchar__static-info",children:["Random character for today!",(0,u.jsx)("br",{}),"Do you want to get to know him better?"]}),(0,u.jsx)("div",{className:"randomchar__static-random",children:"Or choose another one"}),(0,u.jsx)("div",{tabIndex:0,className:"button button_red button_main",onClick:j,children:"TRY IT"}),(0,u.jsx)("img",{src:o,alt:"mjolnir",className:"randomchar__mjolner"}),(0,u.jsx)("img",{src:l,alt:"shield",className:"randomchar__shield"})]})]})},h=t(1087),f=t(5705),p=function(){var e=(0,a.useState)(null),n=(0,r.Z)(e,2),t=n[0],s=n[1],i=(0,c.Z)(),o=i.clearError,l=i.getCharacterByName,d=function(e){s(e)},m=t?t.length>0?(0,u.jsxs)("div",{className:"form__search-wrapper",children:[(0,u.jsxs)("div",{className:"form__search-success",children:["There is! Visit ",t[0].name," page?"]}),(0,u.jsx)(h.rU,{to:"/characters/".concat(t[0].id),className:"button button_grey button_main",children:(0,u.jsx)("div",{className:"inner",children:"To page"})})]}):(0,u.jsx)("div",{className:"form__search-error",children:"The character was not found. Check the name and try again"}):null;return(0,u.jsx)(f.J9,{initialValues:{name:""},validate:function(e){var n={};return e.name||(n.name="This field is required"),n},onSubmit:function(e){!function(e){o(),l(e).then(d)}(e.name)},children:(0,u.jsxs)(f.l0,{className:"form",children:[(0,u.jsx)("h2",{className:"from__title",children:"Or find a character by name:"}),(0,u.jsxs)("div",{className:"form__wrapper",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)(f.gN,{type:"text",name:"name",id:"name",placeholder:"Enter name"}),(0,u.jsx)(f.Bc,{className:"error",name:"name",component:"div"})]}),(0,u.jsx)("button",{className:"button button_red button_main",type:"submit",children:"FIND"})]}),m]})})},v=t(3433),_=t(6983),x=t(5660),j=function(e){var n=(0,a.useState)([]),t=(0,r.Z)(n,2),o=t[0],l=t[1],d=(0,a.useState)(210),m=(0,r.Z)(d,2),h=m[0],f=m[1],p=(0,a.useState)(!0),j=(0,r.Z)(p,2),b=j[0],g=j[1],N=(0,a.useState)(!1),Z=(0,r.Z)(N,2),k=Z[0],w=Z[1],y=(0,c.Z)(),C=y.loading,E=y.error,S=y.getAllCharacters;(0,a.useEffect)((function(){b&&T(h)}),[b]),(0,a.useEffect)((function(){return window.addEventListener("scrollend",I),function(){window.removeEventListener("scrollend",I)}}),[]);var I=function(){document.documentElement.scrollTop+document.documentElement.clientHeight>=document.documentElement.offsetHeight-3&&g(!0)},T=function(e){g(!1),S(e).then(F).finally(g(!1))},F=function(e){var n=!1;e.length<9&&(n=!0),l((function(n){return[].concat((0,v.Z)(n),(0,v.Z)(e))})),f((function(e){return e+9})),w(n)};var A=function(n){var t=n.map((function(n){var t={objectFit:"cover"};"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===n.thumbnail&&(t={objectFit:"unset"});var r="charlist__item";return n.id===e.selectedChar&&(r+=" activ"),(0,u.jsx)(_.Z,{timeout:600,classNames:"charlist__item",children:(0,u.jsxs)("li",{className:r,tabIndex:0,onClick:function(){return e.onSelectedChar(n.id)},onKeyDown:function(t){" "!==t.key&&"Enter"!==t.key||e.onSelectedChar(n.id)},children:[(0,u.jsx)("img",{src:n.thumbnail,alt:n.name,className:"charlist__img",style:t}),(0,u.jsx)("div",{className:"charlist__name",children:n.name})]})},n.id)}));return(0,u.jsx)(x.Z,{className:"charlist__items",component:"ul",children:t})}(o),M=E?(0,u.jsx)(i.Z,{}):null,O=C&&!b?(0,u.jsx)(s.Z,{}):null;return(0,u.jsx)("div",{className:"charlist",children:(0,u.jsxs)("div",{className:"charlist__wrapper",children:[M,O,A,(0,u.jsx)("button",{className:"button button_red button_long",style:{display:k?"none":"block"},onClick:function(){return T(h)},disabled:C,children:"LOAD MORE"})]})})},b=function(){return(0,u.jsxs)("div",{className:"charinfo__item",children:[(0,u.jsx)("div",{className:"skeleton__info",children:"Please select a character to see information"}),(0,u.jsxs)("div",{className:"skeleton__wrapper",children:[(0,u.jsx)("div",{className:"pulse skeleton__circle"}),(0,u.jsx)("div",{className:"pulse skeleton__block"})]}),(0,u.jsx)("div",{className:"pulse skeleton__rectangle"}),(0,u.jsx)("div",{className:"pulse skeleton__rectangle"}),(0,u.jsx)("div",{className:"pulse skeleton__rectangle"})]})},g=function(e){var n=e.char,t=n.name,r=n.description,a=n.thumbnail,c=n.homepage,s=n.wiki,i=n.comics,o={objectFit:"cover"};return"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===a&&(o={objectFit:"contain"}),(0,u.jsxs)("div",{className:"charinfo__item",children:[(0,u.jsxs)("div",{className:"charinfo__wrapper",children:[(0,u.jsx)("img",{src:a,alt:t,className:"charinfo__img",style:o}),(0,u.jsxs)("div",{className:"charinfo__btns",children:[(0,u.jsx)("div",{className:"charinfo__name",children:t}),(0,u.jsx)("a",{href:c,className:"button button_red button_main button_first",children:"HOMEPAGE"}),(0,u.jsx)("a",{href:s,className:"button button_grey button_main button_second",children:"WIKI"})]})]}),(0,u.jsx)("div",{className:"charinfo__descr",children:r.slice(0,210)+"..."}),(0,u.jsx)("div",{className:"charinfo__text",children:"Comics:"}),(0,u.jsxs)("ul",{className:"charinfo__list",children:[i.length>0?null:"There is no comics with this character",i.slice(0,7).map((function(e,n){var t=e.resourceURI.match(/\/\d+/g);return(0,u.jsx)("li",{className:"charinfo__list-item",children:(0,u.jsx)(h.rU,{to:"comics".concat(t[0]),children:e.name})},n)}))]})]})},N=function(e){var n=(0,a.useState)(null),t=(0,r.Z)(n,2),o=t[0],l=t[1],d=(0,c.Z)(),m=d.loading,h=d.error,f=d.getCharacter,v=d.clearError;(0,a.useEffect)((function(){_()}),[e.charId]);var _=function(n){v();var t=e.charId;t&&f(t).then(x)},x=function(e){l(e)},j=o||m||h?null:(0,u.jsx)(b,{}),N=h?(0,u.jsx)(i.Z,{}):null,Z=m?(0,u.jsx)(s.Z,{}):null,k=m||h||!o?null:(0,u.jsx)(g,{char:o});return(0,u.jsx)("div",{className:"charinfo",children:(0,u.jsxs)("div",{className:"abv",children:[j,N,Z,k,(0,u.jsx)(p,{})]})})},Z=t(5671),k=t(9466),w=t(136),y=t(7277),C=function(e){(0,w.Z)(t,e);var n=(0,y.Z)(t);function t(){var e;(0,Z.Z)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=n.call.apply(n,[this].concat(a))).state={error:!1},e}return(0,k.Z)(t,[{key:"componentDidCatch",value:function(e,n){console.log(e,n),this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?(0,u.jsx)(i.Z,{}):this.props.children}}]),t}(a.Component),E=C,S=t.p+"static/media/bg-vision.8de497492999c5d20b03.png",I=t(4270),T=function(){var e=(0,a.useState)(null),n=(0,r.Z)(e,2),t=n[0],c=n[1];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(I.q,{children:[(0,u.jsx)("meta",{name:"description",content:"Marvel information portal"}),(0,u.jsx)("title",{children:"Marvel information portal"})]}),(0,u.jsx)(E,{children:(0,u.jsx)(m,{})}),(0,u.jsxs)("div",{className:"char__content",children:[(0,u.jsx)(E,{children:(0,u.jsx)(j,{onSelectedChar:function(e){c(e)},selectedChar:t})}),(0,u.jsx)(E,{children:(0,u.jsx)(N,{charId:t})}),(0,u.jsx)("img",{className:"bg-decoration",src:S,alt:"vision"})]})]})}},8813:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(4165),a=t(5861),c=t(9439),s=t(2791),i=function(){var e=function(){var e=(0,s.useState)(!1),n=(0,c.Z)(e,2),t=n[0],i=n[1],o=(0,s.useState)(!1),l=(0,c.Z)(o,2),u=l[0],d=l[1],m=(0,s.useCallback)(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t,a,c,s,o,l=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>1&&void 0!==l[1]?l[1]:"GET",a=l.length>2&&void 0!==l[2]?l[2]:null,c=l.length>3&&void 0!==l[3]?l[3]:{"Content-Type":"application/json"},i(!0),e.prev=4,e.next=7,fetch(n,{method:t,body:a,headers:c});case 7:if((s=e.sent).ok){e.next=10;break}throw new Error("Could not fetch ".concat(n,", status: ").concat(s.status));case 10:return e.next=12,s.json();case 12:return o=e.sent,i(!1),e.abrupt("return",o);case 17:throw e.prev=17,e.t0=e.catch(4),i(!1),d(!0),e.t0;case 22:case"end":return e.stop()}}),e,null,[[4,17]])})));return function(n){return e.apply(this,arguments)}}(),[]);return{loading:t,request:m,error:u,clearError:(0,s.useCallback)((function(){return d(!1)}),[])}}(),n=e.loading,t=e.request,i=e.error,o=e.clearError,l="https://gateway.marvel.com:443/v1/public/",u="apikey=204e8daa4fa4e2b5a23c1784ae822151",d=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,a,c=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>0&&void 0!==c[0]?c[0]:210,e.next=3,t("".concat(l,"characters?limit=9&offset=").concat(n,"&").concat(u));case 3:return a=e.sent,e.abrupt("return",a.data.results.map(_));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("".concat(l,"characters/").concat(n,"?&").concat(u));case 2:return a=e.sent,e.abrupt("return",_(a.data.results[0]));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),h=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("".concat(l,"characters?name=").concat(n,"&").concat(u));case 2:return a=e.sent,e.abrupt("return",a.data.results.map(_));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("".concat(l,"comics/").concat(n,"?").concat(u));case 2:return a=e.sent,e.abrupt("return",v(a.data.results[0]));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,a,c=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>0&&void 0!==c[0]?c[0]:210,e.next=3,t("".concat(l,"comics?limit=8&offset=").concat(n,"&").concat(u));case 3:return a=e.sent,e.abrupt("return",a.data.results.map(v));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(e){var n;return{id:e.id,name:e.title,description:e.description,page:e.pageCount,language:null===(n=e.textObjects[0])||void 0===n?void 0:n.language,thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,price:e.prices[0].price}},_=function(e){return{id:e.id,name:e.name,description:e.description?e.description:"There is no description for this character",thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,homepage:e.urls[0].url,wiki:e.urls[1].url,comics:e.comics.items}};return{loading:n,error:i,getAllCharacters:d,getCharacter:m,clearError:o,getAllComics:p,getComic:f,getCharacterByName:h}}}}]);
//# sourceMappingURL=89.0d230e1d.chunk.js.map